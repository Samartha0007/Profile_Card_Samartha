<!DOCTYPE html>  <html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Profile Card Service</title>  
</head>  
<body>  
    <h2>Create Profile</h2>  
    <input type="text" id="name" placeholder="Name" required><br>  
    <input type="email" id="email" placeholder="Email" required><br>  
    <textarea id="bio" placeholder="Short Bio" required></textarea><br>  
    <button onclick="createProfile()">Create</button>  <h2>All Profiles</h2>  
<div id="profiles"></div>  

<script type="module">  
    // Import Firebase modules  
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";  
    import { getFirestore, collection, addDoc, getDocs, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";  

    // Firebase Configuration  
    const firebaseConfig = {  
        apiKey: "AIzaSyDVQpZYEQmmM3fRgr2PEAxaDQzeOyZYCF0",  
        authDomain: "garena-a6421.firebaseapp.com",  
        projectId: "garena-a6421",  
        storageBucket: "garena-a6421.firebasestorage.app",  
        messagingSenderId: "1099395566306",  
        appId: "1:1099395566306:web:fd4524cb40882dcd2cecbb"  
    };  

    // Initialize Firebase  
    const app = initializeApp(firebaseConfig);  
    const db = getFirestore(app);  

    // Create Profile Function  
    window.createProfile = async function () {  
        const name = document.getElementById("name").value;  
        const email = document.getElementById("email").value;  
        const bio = document.getElementById("bio").value;  

        if (!name || !email || !bio) {  
            alert("All fields are required!");  
            return;  
        }  

        try {  
            const docRef = await addDoc(collection(db, "profiles"), { name, email, bio });  
            alert(`Profile Created! Share this link: ?id=${docRef.id}`);  
            location.reload();  
        } catch (error) {  
            console.error("Error adding document: ", error);  
        }  
    };  

    // Load All Profiles  
    async function loadProfiles() {  
        const querySnapshot = await getDocs(collection(db, "profiles"));  
        let profilesHTML = "";  
        querySnapshot.forEach((doc) => {  
            profilesHTML += `<p><strong>${doc.data().name}</strong>: ${doc.data().bio}   
            (<a href="?id=${doc.id}">View</a>)</p>`;  
        });  
        document.getElementById("profiles").innerHTML = profilesHTML;  
    }  

    // Show Single Profile if URL has ID  
    const params = new URLSearchParams(window.location.search);  
    if (params.has("id")) {  
        const docRef = doc(db, "profiles", params.get("id"));  
        getDoc(docRef).then((docSnap) => {  
            if (docSnap.exists()) {  
                document.body.innerHTML = `<h2>${docSnap.data().name}</h2>  
                    <p>${docSnap.data().bio}</p>  
                    <p>Email: ${docSnap.data().email}</p>`;  
            } else {  
                document.body.innerHTML = "<h2>Profile Not Found</h2>";  
            }  
        });  
    } else {  
        loadProfiles();  
    }  
</script>

</body>  
</html>  
